<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.weindependent.app.database.mapper.weindependent.EventSpeakerMapper">

    <select id="getById" parameterType="long" resultType="com.weindependent.app.vo.event.EventSpeakerVO">
        SELECT s.user_id,
               u.real_name AS name,
               s.title,
               s.background,
               s.description,
               img.file_path AS bannerUrl
        FROM event_speaker s
        LEFT JOIN t_system_user u ON s.user_id = u.id
        LEFT JOIN event_speaker_image img ON s.banner_id = img.id
        WHERE s.user_id = #{id}
    </select>

    <select id="searchByName" parameterType="string" resultType="com.weindependent.app.vo.event.EventSpeakerVO">
        SELECT s.user_id,
               u.real_name AS name,
               s.title,
               s.background,
               s.description,
               img.file_path AS bannerUrl
        FROM event_speaker s
        LEFT JOIN t_system_user u ON s.user_id = u.id
        LEFT JOIN event_speaker_image img ON s.banner_id = img.id
        WHERE u.real_name LIKE CONCAT('%', #{name}, '%')
        ORDER BY s.update_time DESC
    </select>

</mapper>
